---
import { ImageProps } from "../generic/index.astro";

export interface Props {
    title: string;
    subtitle?: string;
    image: ImageProps;
    height?: "string";
    bgBrightness?: number;
}

const {title, subtitle, image, height = "600px", bgBrightness = 1} = Astro.props as Props;
---

<section class="hero">
    <h1>{title}
    {subtitle && <span class="hero__subtitle">{subtitle}</span>}</h1>
    <slot />
    <div class="hero__filter"></div>
    <img class="hero__bg" src={image.src} alt={image.alt} />
</section>

<style define:vars={{height, bgBrightness}}>
    .hero {
        width: 100%;
        height: min(50vh, var(--height));
        
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        text-align: center;
    }

    .hero h1 {
        color: var(--theme-secondary);
    }
    
    .hero__subtitle {
        font-size: var(--font-size-xl);
        display: block;
    }

    .hero *:not(.hero__bg, .hero__filter) {
        position: relative;
        z-index: 2;
    }

    .hero__filter {
        width: 100%;
        height: 100%;
        position: absolute;
        backdrop-filter: brightness(var(--bgBrightness));
        z-index: 1;
    }

    .hero__bg {
        width: 100%;
        height: 100%;
        position: absolute;
        object-fit: cover;

        z-index: 0;
    }
</style>