---
import BaseHead from "../../components/head/BaseHead.astro";
import BlogList from "../../components/blog/BlogList.astro";
import { Props as PostPreviewProps } from '../../components/blog/BlogPostPreview.astro';

import Blogs from "../api/blogs.json"

const getBlogPreview = post => {
    let preview: PostPreviewProps = {
        title: post.title,
        summary: post.summary,
        date: new Date(post.date),
        link: "https://example.com",
        mainImage: post.image
    }
    return preview;
}

const blogPreviewList = Blogs.map(post => getBlogPreview(post))
---

<html>

<head>
    <!-- Preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Render base tags -->
    <BaseHead title="WM Demo Page" description="A page for demonstrating Astro components"
        canonicalURL="https://www.example.com" image="https://picsum.photos/200/300" gtmContainerID="1234">
        <link slot="before" rel="stylesheet" href="https://fonts.gstatic.com/" crossorigin>
    </BaseHead>
    <!-- Site specific tags -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
</head>

<body>
    <h1>Hello world!</h1>
    <BlogList posts={blogPreviewList} title="My blog posts" />
</body>

</html>